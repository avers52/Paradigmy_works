class Сотрудник:
    def __init__(self, id_сотрудника, фамилия, зарплата, id_отдела):
        self.id_сотрудника = id_сотрудника
        self.фамилия = фамилия
        self.зарплата = зарплата
        self.id_отдела = id_отдела  # Для связи один-ко-многим

class Отдел:
    def __init__(self, id_отдела, наименование):
        self.id_отдела = id_отдела
        self.наименование = наименование

class СотрудникиОтдела:
    def __init__(self, id_сотрудника, id_отдела):
        self.id_сотрудника = id_сотрудника
        self.id_отдела = id_отдела

# Тестовые данные для Отделов
отделы = [
    Отдел(1, "Отдел разработки"),
    Отдел(2, "Отдел маркетинга"),
    Отдел(3, "Отдел продаж"),
    Отдел(4, "Отдел поддержки"),
    Отдел(5, "Отдел аналитики")
]

# Тестовые данные для Сотрудников
сотрудники = [
    Сотрудник(1, "Иванов", 75000.0, 1),
    Сотрудник(2, "Петров", 82000.0, 1),
    Сотрудник(3, "Сидоров", 68000.0, 2),
    Сотрудник(4, "Алексеев", 71000.0, 3),
    Сотрудник(5, "Андреева", 79000.0, 4),
    Сотрудник(6, "Белов", 65000.0, 5),
    Сотрудник(7, "Афанасьев", 85000.0, 1),
    Сотрудник(8, "Григорьева", 73000.0, 3)
]

сотрудники_отдела = [
    СотрудникиОтдела(1, 1),
    СотрудникиОтдела(1, 3),
    СотрудникиОтдела(2, 1),
    СотрудникиОтдела(3, 2),
    СотрудникиОтдела(4, 3),
    СотрудникиОтдела(5, 4),
    СотрудникиОтдела(6, 5),
    СотрудникиОтдела(7, 1),
    СотрудникиОтдела(8, 3),
    СотрудникиОтдела(8, 5)
]

print("=== Запрос 1 ===")
отделы_с_словом_отдел = [отдел for отдел in отделы if "отдел" in отдел.наименование.lower()]
print("Отделы, содержащие слово 'отдел':")
for отдел in отделы_с_словом_отдел:
    print(f"  - {отдел.наименование}")

print("\nСотрудники, работающие в этих отделах:")
for отдел in отделы_с_словом_отдел:
    сотрудники_в_отделе = [сотр for сотр in сотрудники if сотр.id_отдела == отдел.id_отдела]
    print(f"  {отдел.наименование}:")
    for сотр in сотрудники_в_отделе:
        print(f"    {сотр.фамилия} (ID: {сотр.id_сотрудника}, Зарплата: {сотр.зарплата})")

print("\n=== Запрос 2 ===")
# Группировка сотрудников по отделам и вычисление средней зарплаты
средняя_зарплата_по_отделам = []
for отдел in отделы:
    зарплаты_в_отделе = [сотр.зарплата for сотр in сотрудники if сотр.id_отдела == отдел.id_отдела]
    if зарплаты_в_отделе:  # Проверка, что в отделе есть сотрудники
        средняя_зарплата = sum(зарплаты_в_отделе) / len(зарплаты_в_отделе)
        средняя_зарплата = round(средняя_зарплата, 2)  # Округление до 2 знаков
        средняя_зарплата_по_отделам.append((отдел.наименование, средняя_зарплата))

# Сортировка по средней зарплате (по убыванию)
средняя_зарплата_по_отделам.sort(key=lambda x: x[1], reverse=True)

print("Отделы, отсортированные по средней зарплате (убывание):")
for название, средняя in средняя_зарплата_по_отделам:
    print(f"  {название}: {средняя}")

print("\n=== Запрос 3 ===")
сотрудники_с_а = [сотр for сотр in сотрудники if сотр.фамилия.startswith("А")]
print("Сотрудники, чья фамилия начинается с 'А':")
for сотр in сотрудники_с_а:
    отдел = next((отд for отд in отделы if отд.id_отдела == сотр.id_отдела), None)
    отдел_название = отдел.наименование if отдел else "Неизвестный отдел"
    print(f"  {сотр.фамилия} (Отдел: {отдел_название})")
